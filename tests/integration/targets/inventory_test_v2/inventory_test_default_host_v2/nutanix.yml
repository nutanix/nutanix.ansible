---
plugin: nutanix.ncp.ntnx_prism_vm_inventory_v2
# nutanix_host: hostname # Or set NUTANIX_HOST or NUTANIX_HOSTNAME environment variable
# nutanix_username: username # Or set NUTANIX_USERNAME environment variable
# nutanix_password: password # Or set NUTANIX_PASSWORD environment variable
# nutanix_port: port # Or set NUTANIX_PORT environment variable
# validate_certs: false # Or set NUTANIX_VALIDATE_CERTS environment variable
fetch_all_vms: true
compose:
  ansible_user: "'ansible_user'"
  memory_gb: memory_size_bytes / 1073741824 if memory_size_bytes else 0
strict: true
groups:
  powered_on: power_state == 'ON'
  powered_off: power_state == 'OFF'
  high_memory: memory_size_bytes > 8589934592 # > 8GB
  low_memory: memory_size_bytes <= 8589934592 # <= 8GB
keyed_groups:
  - key: machine_type
    prefix: machine
    separator: "_"
